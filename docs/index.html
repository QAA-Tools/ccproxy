<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Claude Code Proxy - è½»é‡çº§ Claude ä»£ç†åˆ‡æ¢å·¥å…·</title>
    <link rel="icon" href="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'><text y='.9em' font-size='90'>ğŸ¤–</text></svg>">
    <style>
        :root {
            --primary: #007AFF;
            --success: #34c759;
            --warning: #f59e0b;
            --danger: #ff3b30;
            --bg: #f5f5f7;
            --card: #ffffff;
            --text: #1d1d1f;
            --muted: #86868b;
            --border: #d2d2d7;
        }
        * { box-sizing: border-box; margin: 0; padding: 0; }
        body {
            font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, "Helvetica Neue", Arial, "Microsoft YaHei", sans-serif;
            background: var(--bg);
            color: var(--text);
            line-height: 1.6;
        }
        .container { max-width: 900px; margin: 0 auto; padding: 20px; }

        /* Header */
        header {
            text-align: center;
            padding: 60px 20px;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
        }
        header h1 { font-size: 2.5em; margin-bottom: 10px; }
        header p { font-size: 1.2em; opacity: 0.9; }
        .badges { margin-top: 20px; }
        .badges a { margin: 0 5px; }

        /* Navigation */
        nav {
            background: var(--card);
            border-bottom: 1px solid var(--border);
            position: sticky;
            top: 0;
            z-index: 100;
        }
        nav ul {
            list-style: none;
            display: flex;
            justify-content: center;
            flex-wrap: wrap;
            padding: 0;
        }
        nav a {
            display: block;
            padding: 15px 20px;
            color: var(--text);
            text-decoration: none;
            font-weight: 500;
            transition: color 0.2s;
        }
        nav a:hover { color: var(--primary); }

        /* Sections */
        section {
            background: var(--card);
            border-radius: 12px;
            padding: 30px;
            margin: 20px 0;
            box-shadow: 0 2px 10px rgba(0,0,0,0.05);
        }
        h2 {
            color: var(--text);
            border-bottom: 2px solid var(--primary);
            padding-bottom: 10px;
            margin-bottom: 20px;
        }
        h3 { margin: 25px 0 15px; color: #333; }
        p { margin: 10px 0; }
        ul, ol { margin: 10px 0; padding-left: 30px; }
        li { margin: 5px 0; }

        /* Code */
        code {
            background: #f0f0f0;
            padding: 2px 6px;
            border-radius: 4px;
            font-family: "SF Mono", Monaco, Consolas, monospace;
            font-size: 0.9em;
        }
        pre {
            background: #1e1e1e;
            color: #d4d4d4;
            padding: 15px;
            border-radius: 8px;
            overflow-x: auto;
            margin: 15px 0;
        }
        pre code { background: none; color: inherit; padding: 0; }

        /* Steps */
        .steps { counter-reset: step; }
        .step {
            position: relative;
            padding-left: 50px;
            margin: 20px 0;
        }
        .step::before {
            counter-increment: step;
            content: counter(step);
            position: absolute;
            left: 0;
            top: 0;
            width: 35px;
            height: 35px;
            background: var(--primary);
            color: white;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: bold;
        }

        /* Cards */
        .card-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
            gap: 20px;
            margin: 20px 0;
        }
        .card {
            background: var(--bg);
            border-radius: 10px;
            padding: 20px;
            border: 1px solid var(--border);
        }
        .card h4 {
            color: var(--primary);
            margin-bottom: 10px;
        }

        /* Alerts */
        .alert {
            padding: 15px 20px;
            border-radius: 8px;
            margin: 15px 0;
        }
        .alert-info { background: #e3f2fd; border-left: 4px solid var(--primary); }
        .alert-warning { background: #fff3cd; border-left: 4px solid var(--warning); }
        .alert-success { background: #d4edda; border-left: 4px solid var(--success); }

        /* Table */
        table {
            width: 100%;
            border-collapse: collapse;
            margin: 15px 0;
        }
        th, td {
            padding: 12px;
            text-align: left;
            border-bottom: 1px solid var(--border);
        }
        th { background: var(--bg); font-weight: 600; }

        /* Footer */
        footer {
            text-align: center;
            padding: 40px 20px;
            color: var(--muted);
        }
        footer a { color: var(--primary); text-decoration: none; }

        /* Spoiler (click to reveal) */
        .spoiler {
            background: #1d1d1f;
            color: transparent;
            cursor: pointer;
            padding: 2px 4px;
            border-radius: 3px;
            user-select: none;
            transition: all 0.3s ease;
        }
        .spoiler:hover {
            background: #333;
        }
        .spoiler.revealed {
            background: transparent;
            color: inherit;
            cursor: default;
        }

        /* Responsive */
        @media (max-width: 600px) {
            header h1 { font-size: 1.8em; }
            nav a { padding: 12px 15px; font-size: 0.9em; }
            section { padding: 20px; }
        }
    </style>
</head>
<body>
    <header>
        <h1>Claude Code Proxy</h1>
        <p>è½»é‡çº§ Claude ä»£ç† - æ— éœ€é‡å¯å³å¯åˆ‡æ¢ä¾›åº”å•†</p>
        <div class="badges">
            <a href="https://github.com/QAA-Tools/ccproxy/releases"><img src="https://img.shields.io/github/v/release/QAA-Tools/ccproxy?style=flat-square" alt="Release"></a>
            <a href="https://github.com/QAA-Tools/ccproxy"><img src="https://img.shields.io/github/stars/QAA-Tools/ccproxy?style=flat-square" alt="Stars"></a>
        </div>
    </header>

    <nav>
        <ul>
            <li><a href="#intro">ç®€ä»‹</a></li>
            <li><a href="#quick-start">å¿«é€Ÿå¼€å§‹</a></li>
            <li><a href="#config">é…ç½®è¯´æ˜</a></li>
            <li><a href="#web-ui">Web UI ä½¿ç”¨</a></li>
            <li><a href="#advanced">é«˜çº§åŠŸèƒ½</a></li>
        </ul>
    </nav>

    <div class="container">
        <!-- ç®€ä»‹ -->
        <section id="intro">
            <h2>ç®€ä»‹</h2>
            <p>è½»é‡çº§ Claude API åå‘ä»£ç†å·¥å…·ï¼Œæä¾› Web UI ç®¡ç†å¤šä¸ªä¾›åº”å•†ï¼Œæ”¯æŒè‡ªåŠ¨æ¨¡å‹å‘ç°ã€å³æ—¶åˆ‡æ¢ç­‰åŠŸèƒ½ã€‚</p>
            <p><strong>é€‚ç”¨åœºæ™¯ï¼š</strong>æ— éœ€ä¿®æ”¹ Claude Code é…ç½®ï¼Œåœ¨å¤šä¸ªè½¬å‘ç«™ä¹‹é—´å¿«é€Ÿåˆ‡æ¢ã€‚</p>
            <p><strong>æ‹“å±•åŠŸèƒ½ï¼š</strong>æµ‹è¯•æ¨¡å‹å¥åº·<span class="spoiler">ï¼ˆä¿æŒå›¤å›¤é¼ çš„è´¦æˆ·æ´»è·ƒï¼‰ã€‚</span></p>
        </section>

        <!-- å¿«é€Ÿå¼€å§‹ -->
        <section id="quick-start">
            <h2>å¿«é€Ÿå¼€å§‹</h2>

            <div class="steps">
                <div class="step">
                    <strong>å¤åˆ¶é…ç½®æ–‡ä»¶</strong>
                    <pre><code>copy config.in.json config.json</code></pre>
                </div>
                <div class="step">
                    <strong>ç¼–è¾‘é…ç½®æ–‡ä»¶</strong>
                    <p>æ‰“å¼€ <code>config.json</code>ï¼Œå¡«å…¥è½¬å‘ç«™ä¿¡æ¯ã€‚</p>
                </div>
                <div class="step">
                    <strong>å¯åŠ¨ä»£ç†</strong>
                    <pre><code>python ccproxy.py --config config.json</code></pre>
                </div>
                <div class="step">
                    <strong>æ‰“å¼€ Web UI</strong>
                    <ul>
                        <li>æµè§ˆå™¨è®¿é—® <code>http://127.0.0.1:3456</code> æŸ¥çœ‹çŠ¶æ€å¹¶ç®¡ç† provider</li>
                        <li>ä½¿ç”¨ <code>sk-your-local-ui-key</code> ä½œä¸ºå¯†ç ç™»å½•ï¼ˆç”¨æˆ·åä»»æ„ï¼‰</li>
                    </ul>
                </div>
                <div class="step">
                    <strong>é…ç½® Claude Code</strong>
                    <p>ä¿®æ”¹ Claude Code é…ç½®æ–‡ä»¶ï¼š</p>
                    <ul>
                        <li><strong>Windows:</strong> <code>%USERPROFILE%\.claude\settings.json</code></li>
                        <li><strong>macOS/Linux:</strong> <code>~/.claude/settings.json</code></li>
                    </ul>
                    <pre><code>{
  "env": {
    "ANTHROPIC_AUTH_TOKEN": "sk-your-local-ui-key",
    "ANTHROPIC_BASE_URL": "http://127.0.0.1:3456"
  }
}</code></pre>
                    <p>ä¿®æ”¹åæ— éœ€é‡å¯ Claude Codeã€‚</p>
                </div>
            </div>
        </section>

        <!-- é…ç½®è¯´æ˜ -->
        <section id="config">
            <h2>é…ç½®è¯´æ˜</h2>

            <h3>config.json ç»“æ„</h3>
            <pre><code>{
  "HOST": "0.0.0.0",
  "PORT": 3456,
  "APIKEY": "sk-your-local-ui-key",
  "Providers": [
    {
      "name": "example-provider1",
      "api_base_url": "https://api.example.com/v1/messages",
      "api_key": "sk-provider-key-1",
      "models": [
        "claude-sonnet-4-5-20250929",
        "claude-opus-4-5-20251101"
      ],
      "comment": "å¯é€‰çš„å¤‡æ³¨ä¿¡æ¯"
    }
  ]
}</code></pre>

            <h3>é…ç½®é¡¹è¯´æ˜</h3>
            <table>
                <tr>
                    <th>é…ç½®é¡¹</th>
                    <th>è¯´æ˜</th>
                </tr>
                <tr>
                    <td><code>HOST</code></td>
                    <td>ä»£ç†æœåŠ¡å™¨ç›‘å¬åœ°å€ï¼ˆé€šå¸¸ä½¿ç”¨ 0.0.0.0 æˆ– 127.0.0.1ï¼‰</td>
                </tr>
                <tr>
                    <td><code>PORT</code></td>
                    <td>ä»£ç†æœåŠ¡å™¨ç«¯å£ï¼ˆé»˜è®¤ 3456ï¼‰</td>
                </tr>
                <tr>
                    <td><code>APIKEY</code></td>
                    <td>æœ¬åœ°è®¤è¯å¯†é’¥ - <strong>ç”¨äº Claude Code è¿æ¥ï¼ˆ<code>ANTHROPIC_AUTH_TOKEN</code>ï¼‰å’Œ Web UI ç™»å½•</strong></td>
                </tr>
                <tr>
                    <td><code>Providers</code></td>
                    <td>ä¸Šæ¸¸ä¾›åº”å•†åˆ—è¡¨ï¼Œå¯é…ç½®å¤šä¸ª</td>
                </tr>
            </table>

            <h3>Provider é…ç½®é¡¹</h3>
            <table>
                <tr>
                    <th>å­—æ®µ</th>
                    <th>è¯´æ˜</th>
                </tr>
                <tr>
                    <td><code>name</code></td>
                    <td>ä¾›åº”å•†åç§°ï¼ˆè‡ªå®šä¹‰ï¼Œç”¨äºè¯†åˆ«ï¼‰</td>
                </tr>
                <tr>
                    <td><code>api_base_url</code></td>
                    <td>ä¸Šæ¸¸ API åœ°å€ï¼ˆæ”¯æŒ /v1/messagesã€/v1/chat/completionsã€/v1/responses ç«¯ç‚¹ï¼‰</td>
                </tr>
                <tr>
                    <td><code>api_key</code></td>
                    <td>ä¸Šæ¸¸ API å¯†é’¥</td>
                </tr>
                <tr>
                    <td><code>models</code></td>
                    <td>å¯ç”¨æ¨¡å‹åˆ—è¡¨ï¼ˆå¯é€šè¿‡ Web UI è‡ªåŠ¨åˆ·æ–°ï¼‰</td>
                </tr>
                <tr>
                    <td><code>comment</code></td>
                    <td>å¯é€‰å¤‡æ³¨ï¼ˆç”¨äºè®°å½•ä¾›åº”å•†ä¿¡æ¯ï¼‰</td>
                </tr>
            </table>
        </section>

        <!-- Web UI ä½¿ç”¨ -->
        <section id="web-ui">
            <h2>Web UI ä½¿ç”¨</h2>

            <h3>ç•Œé¢å¸ƒå±€è¯´æ˜</h3>
            <p>Web UI åˆ†ä¸ºä»¥ä¸‹å‡ ä¸ªä¸»è¦åŒºåŸŸï¼š</p>
            <ul>
                <li><strong>é¡¶éƒ¨çŠ¶æ€æ ï¼š</strong>æ˜¾ç¤ºå½“å‰é€‰ä¸­çš„ Provider å’Œ Reload Config æŒ‰é’®</li>
                <li><strong>Providers é¢æ¿ï¼š</strong>æ˜¾ç¤ºæ‰€æœ‰ provider åˆ—è¡¨ï¼Œå¯ç‚¹å‡»åˆ‡æ¢å’Œæ“ä½œ</li>
                <li><strong>Models é¢æ¿ï¼š</strong>æ˜¾ç¤ºå½“å‰ provider çš„æ¨¡å‹åˆ—è¡¨ï¼Œå¯åˆ·æ–°å’Œå¤åˆ¶</li>
                <li><strong>HTTP Overrides é¢æ¿ï¼š</strong>é…ç½® Token ä¼ é€’æ–¹å¼å’Œè¦†å†™è§„åˆ™</li>
                <li><strong>Provider Test é¢æ¿ï¼š</strong>æµ‹è¯• provider å¯ç”¨æ€§</li>
            </ul>

            <h3>æŒ‰é’®åŠŸèƒ½è¯´æ˜</h3>

            <h4>1. å…¨å±€æŒ‰é’®</h4>
            <table>
                <tr>
                    <th>æŒ‰é’®</th>
                    <th>åŠŸèƒ½è¯´æ˜</th>
                </tr>
                <tr>
                    <td><code>Reload Config</code></td>
                    <td>é‡æ–°åŠ è½½ <code>config.json</code> é…ç½®æ–‡ä»¶ï¼Œæ— éœ€é‡å¯ä»£ç†</td>
                </tr>
            </table>

            <h4>2. Providers é¢æ¿æŒ‰é’®</h4>
            <table>
                <tr>
                    <th>æŒ‰é’®</th>
                    <th>åŠŸèƒ½è¯´æ˜</th>
                </tr>
                <tr>
                    <td><code>ç­¾åˆ°</code></td>
                    <td>æ‰“å¼€å¯¹åº”ç«™ç‚¹çš„ç­¾åˆ°é¡µé¢é¢†å–é¢åº¦ï¼ˆé»˜è®¤ <code>{domain}/console/personal</code>ï¼Œå¯åœ¨ provider ä¸­é…ç½® <code>checkin</code> å­—æ®µè‡ªå®šä¹‰ï¼‰</td>
                </tr>
                <tr>
                    <td><code>settings.json</code></td>
                    <td>å¤åˆ¶å½“å‰ provider çš„ Claude Code é…ç½®åˆ°å‰ªè´´æ¿ï¼ˆå¯ç›´æ¥ç²˜è´´åˆ° <code>~/.claude/settings.json</code>ï¼‰</td>
                </tr>
                <tr>
                    <td><code>Token</code></td>
                    <td>å¤åˆ¶å½“å‰ provider çš„ API Key åˆ°å‰ªè´´æ¿</td>
                </tr>
                <tr>
                    <td><code>URL</code></td>
                    <td>å¤åˆ¶å½“å‰ provider çš„ API Base URL åˆ°å‰ªè´´æ¿</td>
                </tr>
                <tr>
                    <td><code>Select</code> </td>
                    <td>é€‰æ‹©å½“å‰ provider ä½œä¸ºæ´»åŠ¨ providerï¼ˆå·²é€‰ä¸­æ—¶æ˜¾ç¤º Selected ï¼‰</td>
                </tr>
            </table>

            <h4>3. Models é¢æ¿æŒ‰é’®</h4>
            <table>
                <tr>
                    <th>æŒ‰é’®</th>
                    <th>åŠŸèƒ½è¯´æ˜</th>
                </tr>
                <tr>
                    <td><code>Refresh</code></td>
                    <td>åˆ·æ–°å½“å‰ provider çš„æ¨¡å‹åˆ—è¡¨ï¼ˆä»ä¸Šæ¸¸ <code>/v1/models</code> è·å–ï¼‰</td>
                </tr>
                <tr>
                    <td><code>Copy</code></td>
                    <td>å¤åˆ¶ <code>/model xxx</code> å‘½ä»¤åˆ°å‰ªè´´æ¿ï¼Œç²˜è´´åˆ° Claude Code åˆ‡æ¢æ¨¡å‹</td>
                </tr>
            </table>

            <h4>4. HTTP Overrides é¢æ¿æŒ‰é’®</h4>
            <p>æ­¤é¢æ¿ç”¨äºé…ç½®ä»£ç†è½¬å‘æ—¶çš„ HTTP è¦†å†™è§„åˆ™ï¼Œåˆ†ä¸ºä¸¤ä¸ªéƒ¨åˆ†ï¼š</p>

            <h5>Token Configurationï¼ˆToken é…ç½®ï¼‰</h5>
            <table>
                <tr>
                    <th>æŒ‰é’®</th>
                    <th>åŠŸèƒ½è¯´æ˜</th>
                </tr>
                <tr>
                    <td><code>Default (Auto)</code></td>
                    <td>ä½¿ç”¨é»˜è®¤çš„é€ä¼ æ¨¡å¼ï¼ˆè‡ªåŠ¨æ›¿æ¢ APIKEYï¼‰</td>
                </tr>
                <tr>
                    <td><code>?token={token}</code></td>
                    <td>å°† Token æ”¾åœ¨ URL æŸ¥è¯¢å‚æ•°ä¸­ï¼ˆ<code>token_in=query</code>ï¼‰</td>
                </tr>
                <tr>
                    <td><code>Authorization: Bearer {token}</code></td>
                    <td>ä½¿ç”¨ Bearer Token æ ¼å¼çš„ Authorization å¤´</td>
                </tr>
                <tr>
                    <td><code>Authorization: {token}</code></td>
                    <td>ç›´æ¥ä½¿ç”¨ Token ä½œä¸º Authorization å¤´çš„å€¼</td>
                </tr>
                <tr>
                    <td><code>x-api-key: {token}</code></td>
                    <td>ä½¿ç”¨ x-api-key å¤´ä¼ é€’ Token</td>
                </tr>
            </table>

            <h5>Override Presetsï¼ˆè¦†å†™é¢„è®¾ï¼‰</h5>
            <table>
                <tr>
                    <th>æŒ‰é’®</th>
                    <th>åŠŸèƒ½è¯´æ˜</th>
                </tr>
                <tr>
                    <td><code>Preset: Claude CLI</code></td>
                    <td>åº”ç”¨ Claude Code é¢„è®¾ç»„åˆï¼ˆHeader + Request è¦†å†™ + Query Paramsï¼‰</td>
                </tr>
                <tr>
                    <td><code>Preset: OpenAI</code></td>
                    <td>åº”ç”¨ OpenAI é¢„è®¾ç»„åˆï¼ˆé€‚ç”¨äº OpenAI æ ¼å¼çš„ç«¯ç‚¹ï¼‰</td>
                </tr>
                <tr>
                    <td><code>Reset Override</code></td>
                    <td>æ¸…ç©ºæ‰€æœ‰è¦†å†™é…ç½®ï¼Œæ¢å¤ä¸ºé€ä¼ æ¨¡å¼</td>
                </tr>
                <tr>
                    <td><code>Apply</code></td>
                    <td>åº”ç”¨å½“å‰é…ç½®çš„ HTTP è¦†å†™è§„åˆ™ï¼ˆæ‰€æœ‰ provider å…±äº«ï¼‰</td>
                </tr>
            </table>

            <h4>5. Provider Test é¢æ¿æŒ‰é’®</h4>
            <table>
                <tr>
                    <th>æŒ‰é’®</th>
                    <th>åŠŸèƒ½è¯´æ˜</th>
                </tr>
                <tr>
                    <td><code>Refresh & Test All</code></td>
                    <td>é‡ç½®æµ‹è¯•çŠ¶æ€ + åˆ·æ–°æ‰€æœ‰ provider çš„æ¨¡å‹åˆ—è¡¨ + æµ‹è¯•æ‰€æœ‰ providerï¼ˆåå°æ‰§è¡Œï¼‰</td>
                </tr>
                <tr>
                    <td><code>Retest Failed</code></td>
                    <td>åªæµ‹è¯•å¤±è´¥çš„ providerï¼ˆä¸åˆ·æ–°æ¨¡å‹åˆ—è¡¨ï¼Œé€Ÿåº¦å¿«ï¼Œåå°æ‰§è¡Œï¼‰</td>
                </tr>
                <tr>
                    <td><code>Test Selected</code></td>
                    <td>æµ‹è¯•å½“å‰é€‰ä¸­çš„ providerï¼ˆå¯åœ¨ Test Model è¾“å…¥æ¡†ä¸­æŒ‡å®šæ¨¡å‹ï¼Œåå°æ‰§è¡Œï¼‰</td>
                </tr>
            </table>

            <h5>ä½¿ç”¨æŠ€å·§</h5>
            <div class="card-grid">
                <div class="card">
                    <h4>ğŸ’¡ æµ‹è¯•ç«™ç‚¹</h4>
                    <ol>
                        <li>åœ¨ <code>config.json</code> ä¸­å¡«å†™æ¯ä¸ª provider çš„ <code>models</code> åˆ—è¡¨</li>
                        <li>ç‚¹å‡» <code>Reload Config</code> é‡æ–°åŠ è½½é…ç½®</li>
                        <li>é‡å¤ç‚¹å‡» <code>Retest Failed</code> ç›´åˆ°æ‰€æœ‰èŠ‚ç‚¹æˆåŠŸ</li>
                    </ol>
                </div>

                <div class="card">
                    <h4>ğŸ“Š æŸ¥çœ‹æ—¥å¿—</h4>
                    <p>æµ‹è¯•å®Œæˆåï¼Œåˆ·æ–°é¡µé¢å¯æŸ¥çœ‹ Provider åç§°é¢œè‰²å˜åŒ–ï¼š<strong style="color: #34c759;">ç»¿è‰²</strong>è¡¨ç¤ºæµ‹è¯•æˆåŠŸã€‚</p>
                    <p>ç¨‹åºä¼šè¾“å‡ºæ¯æ¬¡è¯·æ±‚ä¸è¿”å›å†…å®¹ï¼Œç”¨äºåˆ†ææµ‹è¯•å¤±è´¥çš„åŸå› ã€‚</p>
                </div>
            </div>

            <div class="alert alert-info">
                <strong>æµ‹è¯•æœºåˆ¶ï¼š</strong>è¯·æ±‚ä½“æ ¹æ®ç«¯ç‚¹ç±»å‹è‡ªåŠ¨æ„é€ ï¼ˆ<code>/v1/messages</code> ä½¿ç”¨ Claude Messages æ ¼å¼ï¼Œ<code>/v1/chat/completions</code> ä½¿ç”¨ OpenAI Chat Completions æ ¼å¼ï¼Œ<code>/v1/responses</code> ä½¿ç”¨ OpenAI Responses æ ¼å¼ï¼‰ï¼Œè‡ªåŠ¨åº”ç”¨å¯¹åº”çš„è¦†å†™é¢„è®¾ï¼ˆ<code>/v1/messages</code> ä½¿ç”¨ ClaudeCode é¢„è®¾ + <code>beta=true</code>ï¼Œ<code>/v1/chat/completions</code> å’Œ <code>/v1/responses</code> ä½¿ç”¨ OpenAI é¢„è®¾ + <code>Bearer</code> è®¤è¯ï¼‰ã€‚<span class="spoiler">å› ä¸ºæµ‹è¯•æœºåˆ¶æ˜¯é€šè¿‡æ¨¡ä»¿çœŸå®å®¢æˆ·ç«¯å‘é€è¯·æ±‚ï¼Œæ‰€ä»¥æµ‹è¯•åŠŸèƒ½å¯ç”¨äºä¿æŒè´¦æˆ·æ´»è·ƒã€‚</span>
            </div>
        </section>

        <!-- é«˜çº§åŠŸèƒ½ -->
        <section id="advanced">
            <h2>é«˜çº§åŠŸèƒ½</h2>

            <h3>1. HTTP è¦†å†™ï¼ˆHTTP Overridesï¼‰</h3>
            <p>HTTP Overrides åŠŸèƒ½å…è®¸ä½ è‡ªå®šä¹‰ä»£ç†è½¬å‘æ—¶çš„è¯·æ±‚å¤´ã€è¯·æ±‚ä½“å’ŒæŸ¥è¯¢å‚æ•°ï¼Œç”¨äºç»•è¿‡æŸäº›ç«™ç‚¹çš„å®¢æˆ·ç«¯æ£€æµ‹æˆ–é€‚é…ä¸åŒçš„ API æ ¼å¼ã€‚</p>

            <h4>ä½¿ç”¨åœºæ™¯</h4>
            <div class="card-grid">
                <div class="card">
                    <h4>åœºæ™¯ 1ï¼šé€ä¼ æ¨¡å¼ï¼ˆé»˜è®¤ï¼‰</h4>
                    <p>é€‚ç”¨äºå¤§å¤šæ•°æƒ…å†µï¼Œä»£ç†ä¼šè‡ªåŠ¨æ›¿æ¢å®¢æˆ·ç«¯çš„ APIKEY ä¸º provider çš„ api_keyï¼Œä¿æŒå…¶ä»–è¯·æ±‚å†…å®¹ä¸å˜ã€‚</p>
                    <p><strong>é…ç½®ï¼š</strong>Token Placement é€‰æ‹© <code>Auto (Passthrough)</code></p>
                </div>

                <div class="card">
                    <h4>åœºæ™¯ 2ï¼šæ¨¡æ‹Ÿ Claude Code å®¢æˆ·ç«¯</h4>
                    <p>æŸäº› provider éœ€è¦å®Œæ•´çš„å®¢æˆ·ç«¯ç‰¹å¾æ‰èƒ½é€šè¿‡éªŒè¯ï¼Œä½¿ç”¨å†…ç½®çš„ ClaudeCode é¢„è®¾å¯ä»¥æ¨¡æ‹ŸçœŸå®çš„ Claude Code å®¢æˆ·ç«¯ã€‚</p>
                    <p><strong>é…ç½®ï¼š</strong>ç‚¹å‡» <code>Preset: Claude CLI</code> æŒ‰é’®ï¼Œç„¶åç‚¹å‡» <code>Apply</code></p>
                </div>

                <div class="card">
                    <h4>åœºæ™¯ 3ï¼šOpenAI æ ¼å¼ç«¯ç‚¹</h4>
                    <p>å¦‚æœ provider ä½¿ç”¨ OpenAI æ ¼å¼çš„ç«¯ç‚¹ï¼ˆ<code>/v1/chat/completions</code> æˆ– <code>/v1/responses</code>ï¼‰ï¼Œä½¿ç”¨ OpenAI é¢„è®¾å¯ä»¥æ­£ç¡®è½¬æ¢è¯·æ±‚æ ¼å¼å’Œè®¤è¯æ–¹å¼ï¼ˆBearer tokenï¼‰ã€‚</p>
                    <p><strong>é…ç½®ï¼š</strong>ç‚¹å‡» <code>Preset: OpenAI</code> æŒ‰é’®ï¼Œç„¶åç‚¹å‡» <code>Apply</code></p>
                </div>

                <div class="card">
                    <h4>åœºæ™¯ 4ï¼šè‡ªå®šä¹‰è¦†å†™</h4>
                    <p>å¦‚æœéœ€è¦è‡ªå®šä¹‰è¯·æ±‚å¤´æˆ–è¯·æ±‚ä½“ï¼ˆå¦‚å›ºå®š IPã€æ·»åŠ è‡ªå®šä¹‰å­—æ®µï¼‰ï¼Œå¯ä»¥åœ¨ <code>config.json</code> ä¸­å®šä¹‰è‡ªå·±çš„é¢„è®¾ã€‚</p>
                    <p><strong>é…ç½®ï¼š</strong>å‚è€ƒä¸‹æ–¹"å¦‚ä½•ç”Ÿæˆè‡ªå®šä¹‰è¦†å†™é…ç½®"ç« èŠ‚</p>
                </div>
            </div>

            <div class="alert alert-warning">
                <strong>é‡è¦æç¤ºï¼š</strong>
                <ul>
                    <li>å†…ç½®çš„ <code>ClaudeCode</code> é¢„è®¾ä¼šå®Œå…¨è¦†ç›–è¯·æ±‚å¤´å’Œè¯·æ±‚ä½“ï¼Œä»…ç”¨äº Provider Test æˆ–è½¬å‘é Claude Code çš„è¯·æ±‚</li>
                    <li>æ­£å¸¸ä½¿ç”¨ Claude Code æ—¶ï¼Œå¦‚éœ€è¦†å†™ï¼ˆå¦‚å›ºå®š IPï¼‰ï¼Œåº”è‡ªå®šä¹‰é¢„è®¾ä»…è¦†ç›–éƒ¨åˆ†å­—æ®µï¼ˆå¦‚ <code>X-Real-IP</code>ã€<code>X-Forwarded-For</code>ï¼‰ï¼Œé¿å…ç ´åå·¥å…·è°ƒç”¨ç­‰åŠŸèƒ½</li>
                    <li>HTTP Overrides é…ç½®ä»…å½±å“æ­£å¸¸çš„ä»£ç†è½¬å‘ï¼Œä¸å½±å“ Provider Test åŠŸèƒ½ï¼ˆæµ‹è¯•ä¼šè‡ªåŠ¨é€‰æ‹©åˆé€‚çš„é…ç½®ï¼‰</li>
                </ul>
            </div>

            <h4>å¯æ‰©å±•è®¾è®¡</h4>
            <p>ä½ å¯ä»¥åœ¨ <code>config.json</code> ä¸­å®šä¹‰å¤šä¸ªè‡ªå®šä¹‰é¢„è®¾ï¼ŒWeb UI ä¼šè‡ªåŠ¨è¯†åˆ«å¹¶åœ¨ä¸‹æ‹‰åˆ—è¡¨ä¸­æ˜¾ç¤ºï¼š</p>
            <pre><code>"HeaderOverrides": {
  "ClaudeCode": { ... },
  "MyCustomHeaders": {
    "User-Agent": "MyClient/1.0",
    "X-Custom-Header": "value"
  }
},
"RequestOverrides": {
  "ClaudeCode": { ... },
  "MyCustomRequest": {
    "max_tokens": 16000,
    "stream": false
  }
}</code></pre>

            <h3>2. å¦‚ä½•ç”Ÿæˆè‡ªå®šä¹‰è¦†å†™é…ç½®</h3>
            <p>å¦‚æœç°æœ‰é¢„è®¾æ— æ³•é€šè¿‡æŸäº› provider çš„æ£€æµ‹ï¼Œå¯ä»¥ä»å®é™…è¯·æ±‚æ—¥å¿—ä¸­ç”Ÿæˆè‡ªå®šä¹‰è¦†å†™é…ç½®ã€‚</p>

            <div class="steps">
                <div class="step">
                    <strong>æ­£å¸¸è®¿é—®è·å–åŸºå‡†è¯·æ±‚</strong>
                    <ul>
                        <li>åœ¨ Web UI ä¸­å°† Token Placement è®¾ç½®ä¸º <code>Auto (Passthrough)</code>ï¼ŒHeader Override å’Œ Request Override ç•™ç©º</li>
                        <li>ç‚¹å‡» <code>Apply</code> åº”ç”¨é…ç½®</li>
                        <li>ä½¿ç”¨ Claude Code æ­£å¸¸è®¿é—®ä¸€æ¬¡ç›®æ ‡ provider</li>
                    </ul>
                </div>

                <div class="step">
                    <strong>æŸ¥çœ‹è¯·æ±‚æ—¥å¿—</strong>
                    <p>æ‰“å¼€ <code>ccproxy.log</code> æ–‡ä»¶ï¼Œæ‰¾åˆ°åˆšæ‰çš„è¯·æ±‚è®°å½•ï¼Œå®šä½åˆ° <code>forward: upstream_headers</code> å’Œ <code>forward: request_body</code> éƒ¨åˆ†ã€‚</p>
                </div>

                <div class="step">
                    <strong>ä½¿ç”¨ Claude Code è‡ªåŠ¨æ›´æ–°é…ç½®</strong>
                    <p>å¤åˆ¶ä»¥ä¸‹æç¤ºè¯åˆ° Claude Codeï¼Œè®© AI è‡ªåŠ¨åˆ†ææ—¥å¿—å¹¶æ›´æ–°é…ç½®ï¼š</p>
                    <pre><code>æŸ¥çœ‹æœ€æ–°çš„ ccproxy.log æ—¥å¿—ï¼Œå¯¹æ¯”å½“å‰ config.json ä¸­ HeaderOverrides.ClaudeCode å’Œ RequestOverrides.ClaudeCode çš„é…ç½®ï¼Œä»¥åŠ ccproxy.py ä¸­æµ‹è¯•è¯·æ±‚çš„ model, messages æ ¼å¼ï¼Œæ‰¾å‡ºæ—¥å¿—ä¸­å®é™…å‘é€çš„è¯·æ±‚ä¸é…ç½®æ–‡ä»¶çš„å·®å¼‚ï¼Œç„¶ååŒæ—¶æ›´æ–° config.json å’Œ ccproxy.py ä½¿å…¶ä¸å®é™…è¯·æ±‚ä¸€è‡´ã€‚

å…·ä½“æ­¥éª¤ï¼š
1. æ£€æŸ¥æ—¥å¿—ä¸­æœ€è¿‘çš„ "forward: upstream_headers" éƒ¨åˆ†ï¼Œæå–æ‰€æœ‰è¯·æ±‚å¤´å­—æ®µ
2. æ£€æŸ¥æ—¥å¿—ä¸­æœ€è¿‘çš„ "forward: request_body" éƒ¨åˆ†ï¼Œæå–è¯·æ±‚ä½“ä¸­çš„ç‰¹æ®Šå­—æ®µï¼ˆå¦‚ system, tools, metadata, max_tokens, stream, thinking ç­‰ï¼‰
3. å¯¹æ¯” config.json ä¸­ç°æœ‰çš„ HeaderOverrides.ClaudeCode å’Œ RequestOverrides.ClaudeCode é…ç½®
4. å¯¹æ¯” ccproxy.py ä¸­ _test_provider æ–¹æ³•çš„ request_data æ ¼å¼ï¼ˆåº”ä»…åŒ…å« model, messagesï¼‰
5. æ›´æ–° config.json ä¸­ç¼ºå¤±æˆ–ä¸ä¸€è‡´çš„å­—æ®µï¼ˆRequestOverrides.ClaudeCode åº”åŒ…å« max_tokens, stream ç­‰å®Œæ•´å­—æ®µï¼‰
6. æ›´æ–° ccproxy.py ä¸­çš„æµ‹è¯•è¯·æ±‚æ ¼å¼ï¼ˆä»…ä¿ç•™ model, messagesï¼Œå…¶ä»–å­—æ®µç§»åˆ° RequestOverridesï¼‰
7. å‘Šè¯‰æˆ‘æ›´æ–°äº†å“ªäº›å†…å®¹</code></pre>
                </div>

                <div class="step">
                    <strong>åœ¨ Web UI ä¸­åº”ç”¨æ–°é…ç½®</strong>
                    <ul>
                        <li>ç‚¹å‡» <code>Reload Config</code> é‡æ–°åŠ è½½é…ç½®</li>
                        <li>é€‰æ‹© <code>ClaudeCode</code> é¢„è®¾å¹¶ç‚¹å‡» <code>Apply</code></li>
                        <li>æµ‹è¯•æ˜¯å¦èƒ½æ­£å¸¸è®¿é—® provider</li>
                    </ul>
                </div>
            </div>

            <h3>3. åå°è¿è¡Œä¸çŠ¶æ€æŒä¹…åŒ–</h3>

            <h4>åå°è¿è¡Œï¼ˆLinuxï¼‰</h4>
            <p>ä½¿ç”¨æä¾›çš„ <code>run.sh</code> è„šæœ¬ç®¡ç†åå°è¿è¡Œï¼š</p>
            <pre><code>./run.sh start    # å¯åŠ¨
./run.sh stop     # åœæ­¢
./run.sh restart  # é‡å¯
./run.sh status   # æŸ¥çœ‹çŠ¶æ€</code></pre>
            <p>æ—¥å¿—æ–‡ä»¶ï¼š<code>ccproxy.log</code> | PID æ–‡ä»¶ï¼š<code>ccproxy.pid</code></p>

            <h4>çŠ¶æ€æŒä¹…åŒ–</h4>
            <p>ä»£ç†ä¼šå°†å½“å‰é€‰æ‹©çš„ Provider å’Œè®¤è¯è¦†ç›–è§„åˆ™ä¿å­˜åˆ° <code>proxy_state.json</code>ã€‚åˆ é™¤æ­¤æ–‡ä»¶ä¼šé‡ç½®ä¸ºç¬¬ä¸€ä¸ª Providerã€‚</p>
        </section>

    </div>

    <footer>
        <p>
            <a href="https://github.com/QAA-Tools/ccproxy">GitHub</a> Â·
            Built with Claude & Codex
        </p>
        <p style="margin-top: 10px; font-size: 0.9em;">
            Claude Code Proxy &copy; 2026
        </p>
    </footer>

    <script>
        // Spoiler click-to-reveal functionality
        document.addEventListener('DOMContentLoaded', function() {
            document.querySelectorAll('.spoiler').forEach(function(spoiler) {
                spoiler.addEventListener('click', function() {
                    this.classList.add('revealed');
                });
            });
        });
    </script>
</body>
</html>
